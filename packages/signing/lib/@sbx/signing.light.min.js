!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("@sbx/common"),require("@sbx/crypto")):"function"==typeof define&&define.amd?define("@sbx/signing",["@sbx/common","@sbx/crypto"],i):"object"==typeof exports?exports["@sbx/signing"]=i(require("@sbx/common"),require("@sbx/crypto")):t["@sbx/signing"]=i(t["@sbx/common"],t["@sbx/crypto"])}("undefined"!=typeof self?self:this,function(t,i){return function(t){var i={};function n(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=i,n.d=function(t,i,s){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)n.d(s,o,function(i){return t[i]}.bind(null,o));return s},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=3)}([function(i,n){i.exports=t},function(t,i,n){const s=n(2),o=n(0).BC,e=n(0).Types.Currency,c=Symbol("payload"),r=Symbol("s"),h=Symbol("r"),a=Symbol("fee"),m=Symbol("nOperation");t.exports=class{constructor(){this[c]=o.fromString(""),this[r]=null,this[h]=null,this[a]=new e(0)}withPayload(t){return this[c]=t,this}withFee(t){return this[a]=new e(t),this}withMinFee(){return this[a]=e.MIN_FEE,this}digest(){throw new Error("Not implemented")}sign(t,i,n=!1){this[m]=i;const o=this.digest();let e;return e=!0===n?s.signWithDigest(t,o):s.signWithHash(t,o),this[h]=e.r,this[r]=e.s,this}toRaw(){throw new Error("Not implemented")}static fromRaw(){throw new Error("Not implemented")}bcFromInt(t,i=null){return(null===i?o.fromInt(t):o.fromInt(t,i)).switchEndian()}bcFromStringWithSize(t){return o.concat(this.bcFromInt(t.length,2),this.bcFromString(t))}bcFromBcWithSize(t){return o.concat(this.bcFromInt(t.length,2),t)}static readBCWithSize(t,i){const n={size:t.slice(i,i+2).switchEndian().toInt()};return n.value=t.slice(i+2,i+2+n.size),n}bcFromString(t){return o.fromString(t)}bcFromSign(t,i){return o.concat(this.bcFromBcWithSize(t),this.bcFromBcWithSize(i))}get payload(){return this[c]}get r(){return this[h]}get s(){return this[r]}get fee(){return this[a]}get nOperation(){return this[m]}get isSigned(){return null!==this[r]&&null!==this[h]}}},function(t,i,n){"use strict";const s=n(0).Sha,o=n(6).Keys;t.exports=class{static signWithHash(t,i){const n=s.sha256(i);return o.sign(t,n)}static signWithDigest(t,i){return o.sign(t,i)}}},function(t,i,n){t.exports=n(4)},function(t,i,n){t.exports={OperationsBuilder:n(5),Signer:n(2),Operations:n(7)}},function(t,i,n){const s=n(0).BC,o=Symbol("operations");t.exports=class{constructor(){this[o]=[]}addOperation(t){if(!t.isSigned)throw new Error("Operation needs to be signed.");return this[o].push(t),this}build(){let t=s.fromInt(this[o].length,4).switchEndian();return this[o].forEach(i=>{t=s.concat(t,i.toRaw())}),t}parse(t){let i=s.fromInt(this[o].length,4).switchEndian();return this[o].forEach(t=>{i=s.concat(i,t.toRaw())}),i}}},function(t,n){t.exports=i},function(t,i,n){t.exports={BuyAccount:n(8),ChangeAccountInfo:n(9),ChangeKey:n(10),ChangeKeySigned:n(11),Data:n(12),DelistAccountForSale:n(13),ListAccountForSale:n(14),Transaction:n(15)}},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.Keys.PublicKey,c=n(0).Types.Currency,r=n(0).Types.AccountNumber,h=Symbol("sender"),a=Symbol("target"),m=Symbol("amount"),u=Symbol("price"),b=Symbol("seller"),l=Symbol("new_public_key");class y extends s{static get OPTYPE(){return 6}constructor(t,i,n,s,o,e){super(),this[h]=new r(t),this[a]=new r(i),this[m]=new c(n),this[u]=new c(s),this[b]=new r(o),this[l]=e}digest(){return o.concat(this.bcFromInt(this[h].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this[m].toMolina(),8),this.bcFromInt(this.fee.toMolina(),8),this.payload,this.bcFromInt(e.empty().curve.id,2),this.bcFromInt(this[u].toMolina(),8),this.bcFromInt(this[b].account,4),this[l].encode(),o.fromInt(y.OPTYPE))}toRaw(){return o.concat(this.bcFromInt(y.OPTYPE,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this[m].toMolina(),8),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),e.empty().encode(),this.bcFromInt(2,1),this.bcFromInt(this[u].toMolina(),8),this.bcFromInt(this[b].account,4),this[l].encode(),this.bcFromSign(this.r,this.s))}static fromRaw(t){}}t.exports=y},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.Keys.PublicKey,c=n(0).Types.AccountNumber,r=n(0).Types.AccountName,h=Symbol("account_signer"),a=Symbol("account_target"),m=Symbol("new_public_key"),u=Symbol("new_name"),b=Symbol("new_type"),l=Symbol("with_new_pubkey"),y=Symbol("with_new_name"),p=Symbol("with_new_type");function F(t){let i=0;return!0===t[l]&&(i|=1),!0===t[y]&&(i|=2),!0===t[p]&&(i|=4),i}class I extends s{static get OPTYPE(){return 8}constructor(t,i){super(),this[h]=new c(t),this[a]=new c(i),this[m]=e.empty(),this[u]=o.fromString(""),this[b]=0,this[l]=!1,this[y]=!1,this[p]=!1}withNewPublicKey(t){return this[m]=t,this[l]=!0,this}withNewName(t){return this[u]=new r(t),this[y]=!0,this}withNewType(t){return this[b]=t,this[p]=!0,this}digest(){return o.concat(this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),e.empty().encode(),this.bcFromInt(F(this)),this[m].encode(),this.bcFromBcWithSize(o.fromString(this[u].toString())),this.bcFromInt(this[b],2),this.bcFromInt(I.OPTYPE))}toRaw(){return o.concat(this.bcFromInt(I.OPTYPE,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),e.empty().encode(),this.bcFromInt(F(this)),this[m].encode(),this.bcFromBcWithSize(o.fromString(this[u].toString())),this.bcFromInt(this[b],2),this.bcFromSign(this.r,this.s))}}t.exports=I},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.Keys.PublicKey,c=n(0).Types.AccountNumber,r=Symbol("account_signer"),h=Symbol("new_public_key");class a extends s{static get OPTYPE(){return 2}constructor(t,i){super(),this[r]=new c(t),this[h]=i}digest(){return o.concat(this.bcFromInt(this[r].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this.fee.toMolina(),8),this.payload,this.bcFromInt(e.empty().curve.id,2),this[h].encode(),this.bcFromInt(a.OPTYPE))}toRaw(){return o.concat(this.bcFromInt(a.OPTYPE,4),this.bcFromInt(this[r].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),e.empty().encode(),this.bcFromInt(this[h].encode().length,2),this[h].encode(),this.bcFromSign(this.r,this.s))}}t.exports=a},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.Keys.PublicKey,c=n(0).Types.AccountNumber,r=Symbol("account_signer"),h=Symbol("account_target"),a=Symbol("new_public_key");class m extends s{static get OPTYPE(){return 7}constructor(t,i,n){super(),this[r]=new c(t),this[h]=new c(i),this[a]=n}digest(){return o.concat(this.bcFromInt(this[r].account,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this.fee.toMolina(),8),this.payload,this.bcFromInt(e.empty().curve.id,2),this[a].encode(),this.bcFromInt(m.OPTYPE))}toRaw(){return o.concat(this.bcFromInt(m.OPTYPE,4),this.bcFromInt(this[r].account,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),e.empty().encode(),this.bcFromInt(this[a].encode().length,2),this[a].encode(),this.bcFromSign(this.r,this.s))}}t.exports=m},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.AccountNumber,c=n(0).Types.Currency,r=Symbol("account_signer"),h=Symbol("account_sender"),a=Symbol("account_target"),m=Symbol("data_type"),u=Symbol("data_sequence"),b=Symbol("amount");class l extends s{static get OPTYPE(){return 10}constructor(t,i,n){super(),this[r]=new e(t),this[h]=new e(i),this[a]=new e(n),this[m]=0,this[u]=0,this[b]=new c(0)}withDataType(t){return this[m]=parseInt(t,10),this}withDataSequence(t){return this[u]=parseInt(t,10),this}withAmount(t){return this[b]=new c(t),this}get signer(){return this[r]}get sender(){return this[h]}get target(){return this[a]}get dataType(){return this[m]}get dataSequence(){return this[u]}get amount(){return this[b]}digest(){return o.concat(this.bcFromInt(this[r].account,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[m],2),this.bcFromInt(this[u],2),this.bcFromInt(this[b].toMolina(),8),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),this.bcFromInt(l.OPTYPE,1))}toRaw(){return o.concat(this.bcFromInt(l.OPTYPE,4),this.bcFromInt(this[r].account,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[m],2),this.bcFromInt(this[u],2),this.bcFromInt(this[b].toMolina(),8),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),this.bcFromSign(this.r,this.s))}static fromRaw(t){const i=(t=o.from(t)).slice(4,8).switchEndian().toInt(),n=t.slice(8,12).switchEndian().toInt(),s=t.slice(12,16).switchEndian().toInt(),e=t.slice(20,22).switchEndian().toInt(),r=t.slice(22,24).switchEndian().toInt(),h=t.slice(24,32).switchEndian().toInt(),a=t.slice(32,40).switchEndian().toInt(),m=l.readBCWithSize(t,40).value,u=new l(i,n,s);return u.withDataType(e),u.withDataSequence(r),u.withAmount(c.fromMolina(h)),u.withFee(c.fromMolina(a)),u.withPayload(m),u}sign(t,i){super.sign(t,i,!0)}}t.exports=l},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.Keys.PublicKey,c=n(0).Types.AccountNumber,r=n(0).Types.Currency,h=Symbol("account_signer"),a=Symbol("account_target"),m=Symbol("price"),u=Symbol("account_to_pay"),b=Symbol("new_public_key"),l=Symbol("locked_until_block");class y extends s{static get OPTYPE(){return 5}constructor(t,i){super(),this[h]=new c(t),this[a]=new c(i),this[m]=new r(0),this[u]=new c(0),this[b]=e.empty(),this[l]=0}digest(){return o.concat(this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[m].toMolina(),8),this.bcFromInt(this[u].account,4),this.bcFromInt(this.fee.toMolina(),8),this.payload,this.bcFromInt(e.empty().curve.id,2),this[b].encode(),this.bcFromInt(this[l],4),this.bcFromInt(y.OPTYPE))}toRaw(){return o.concat(this.bcFromInt(y.OPTYPE,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(5,2),this.bcFromInt(this.nOperation,4),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),this.bcFromSign(this.r,this.s))}}t.exports=y},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.Keys.PublicKey,c=n(0).Types.AccountNumber,r=n(0).Types.Currency,h=Symbol("account_signer"),a=Symbol("account_target"),m=Symbol("price"),u=Symbol("account_to_pay"),b=Symbol("new_public_key"),l=Symbol("locked_until_block");class y extends s{static get OPTYPE(){return 4}constructor(t,i,n,s){super(),this[h]=new c(t),this[a]=new c(i),this[m]=new r(n),this[u]=new c(s),this[b]=e.empty(),this[l]=0}asPrivateSale(t,i=0){this[b]=t,this[l]=parseInt(i,10)}digest(){return o.concat(this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[m].toMolina(),8),this.bcFromInt(this[u].account,4),this.bcFromInt(this.fee.toMolina(),8),this.payload,this.bcFromInt(e.empty().curve.id,2),this[b].encode(),this.bcFromInt(this[l],4),this.bcFromInt(y.OPTYPE))}toRaw(){return o.concat(this.bcFromInt(y.OPTYPE,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this[a].account,4),this.bcFromInt(4,2),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[m].toMolina(),8),this.bcFromInt(this[u].account,4),this.bcFromInt(e.empty().curve.id,2),this.bcFromInt(0,2),this.bcFromInt(0,2),this.bcFromInt(this[b].encode().length,2),this[b].encode(),this.bcFromInt(this[l],4),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),this.bcFromSign(this.r,this.s))}}t.exports=y},function(t,i,n){const s=n(1),o=n(0).BC,e=n(0).Types.Keys.PublicKey,c=n(0).Types.Currency,r=n(0).Types.AccountNumber,h=Symbol("sender"),a=Symbol("target"),m=Symbol("amount");class u extends s{static get OPTYPE(){return 1}get sender(){return this[h]}constructor(t,i,n){super(),this[h]=new r(t),this[a]=new r(i),this[m]=new c(n)}digest(){return o.concat(this.bcFromInt(this[h].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this[m].toMolina(),8),this.bcFromInt(this.fee.toMolina(),8),this.payload,o.fromInt(0,2),o.fromInt(u.OPTYPE))}toRaw(){return o.concat(this.bcFromInt(u.OPTYPE,4),this.bcFromInt(this[h].account,4),this.bcFromInt(this.nOperation,4),this.bcFromInt(this[a].account,4),this.bcFromInt(this[m].toMolina(),8),this.bcFromInt(this.fee.toMolina(),8),this.bcFromBcWithSize(this.payload),e.empty().encode(),this.bcFromSign(this.r,this.s))}}t.exports=u}])});
//# sourceMappingURL=signing.light.min.js.map